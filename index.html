<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiniGame Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .app-container {
            width: 350px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .screen {
            display: none;
            min-height: 600px;
        }

        .screen.active {
            display: block;
        }

        /* Home Screen Styles */
        .score-header {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            padding: 20px;
            color: white;
            text-align: center;
        }

        .score-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .total-points {
            font-size: 24px;
            font-weight: bold;
        }

        /* Tic Tac Toe Game */
        .game-container {
            padding: 20px;
            background: #f8f9fa;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            margin: 20px 0;
            background: #2c3e50;
            padding: 5px;
            border-radius: 10px;
        }

        .cell {
            aspect-ratio: 1;
            background: #ecf0f1;
            border: none;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
        }

        .cell:hover {
            background: #d5dbdb;
        }

        .cell.x {
            color: #e74c3c;
            background: #ffebee;
        }

        .cell.o {
            color: #3498db;
            background: #e3f2fd;
        }

        .game-status {
            text-align: center;
            font-size: 18px;
            margin: 15px 0;
            font-weight: bold;
        }

        .reset-btn {
            width: 100%;
            padding: 12px;
            background: #2ecc71;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .reset-btn:hover {
            background: #27ae60;
        }

        /* Navigation */
        .nav-bar {
            display: flex;
            background: #34495e;
            padding: 10px 0;
        }

        .nav-btn {
            flex: 1;
            padding: 15px 10px;
            background: transparent;
            color: white;
            border: none;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 14px;
        }

        .nav-btn.active, .nav-btn:hover {
            background: #2c3e50;
        }

        /* Tasks Screen */
        .tasks-header {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            padding: 20px;
            color: white;
            text-align: center;
        }

        .task-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            transition: background 0.3s;
        }

        .task-item:hover {
            background: #f8f9fa;
        }

        .task-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-weight: bold;
        }

        .youtube { background: #ff0000; }
        .telegram { background: #0088cc; }
        .twitter { background: #1da1f2; }
        .instagram { background: #e4405f; }
        .facebook { background: #1877f2; }

        .task-info {
            flex: 1;
        }

        .task-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .task-reward {
            color: #27ae60;
            font-size: 14px;
        }

        .task-btn {
            padding: 8px 16px;
            background: #2ecc71;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .task-btn:hover {
            background: #27ae60;
        }

        .task-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }

        /* Invite Screen */
        .invite-header {
            background: linear-gradient(45deg, #fa709a, #fee140);
            padding: 20px;
            color: white;
            text-align: center;
        }

        .invite-content {
            padding: 20px;
        }

        .invite-link {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            word-break: break-all;
            font-family: monospace;
        }

        .invite-stats {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .invited-user {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #3498db;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 10px;
        }

        /* Airdrop Screen */
        .airdrop-header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            padding: 20px;
            color: white;
            text-align: center;
        }

        .airdrop-content {
            padding: 20px;
        }

        .airdrop-info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }

        /* Telegram Connect Section */
        .telegram-connect {
            background: #0088cc;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .telegram-btn {
            background: #ffffff;
            color: #0088cc;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 0;
            transition: background 0.3s;
        }

        .telegram-btn:hover {
            background: #f0f0f0;
        }

        .user-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .user-name {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .user-id {
            font-size: 14px;
            color: #7f8c8d;
        }

        .update-section {
            margin: 20px 0;
        }

        .update-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }

        .withdraw-form {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .form-group {
            margin: 15px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .form-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn:hover {
            opacity: 0.9;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .screen.active {
            animation: fadeIn 0.3s ease-out;
        }

        /* Responsive */
        @media (max-width: 400px) {
            .app-container {
                width: 100%;
                height: 100vh;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Home Screen -->
        <div class="screen active" id="homeScreen">
            <div class="score-header">
                <div class="score-info">
                    <div>Player X Points: <span id="playerXPoints">0</span></div>
                    <div>Player O Points: <span id="playerOPoints">0</span></div>
                </div>
                <div class="total-points">Total Points: <span id="totalPoints">0</span></div>
            </div>
            
            <div class="game-container">
                <div class="game-status" id="gameStatus">Player X's Turn</div>
                <div class="game-board" id="gameBoard">
                    <button class="cell" onclick="makeMove(0)"></button>
                    <button class="cell" onclick="makeMove(1)"></button>
                    <button class="cell" onclick="makeMove(2)"></button>
                    <button class="cell" onclick="makeMove(3)"></button>
                    <button class="cell" onclick="makeMove(4)"></button>
                    <button class="cell" onclick="makeMove(5)"></button>
                    <button class="cell" onclick="makeMove(6)"></button>
                    <button class="cell" onclick="makeMove(7)"></button>
                    <button class="cell" onclick="makeMove(😎"></button>
                </div>
                <button class="reset-btn" onclick="resetGame()">New Game</button>
            </div>
        </div>

        <!-- Tasks Screen -->
        <div class="screen" id="tasksScreen">
            <div class="tasks-header">
                <h2>Complete Tasks & Earn Points</h2>
                <p>Complete tasks to earn bonus points</p>
            </div>
            
            <div class="task-item">
                <div class="task-icon youtube">YT</div>
                <div class="task-info">
                    <div class="task-title">Subscribe to YouTube Channel</div>
                    <div class="task-reward">+10 Points</div>
                </div>
                <button class="task-btn" onclick="completeTask('youtube', 10, 'https://www.youtube.com/@MrBeast')">Start</button>
            </div>

            <div class="task-item">
                <div class="task-icon telegram">TG</div>
                <div class="task-info">
                    <div class="task-title">Follow Telegram Channel</div>
                    <div class="task-reward">+15 Points</div>
                </div>
                <button class="task-btn" onclick="completeTask('telegram', 15, 'https://t.me/durov')">Start</button>
            </div>

            <div class="task-item">
                <div class="task-icon twitter">TW</div>
                <div class="task-info">
                    <div class="task-title">Follow on Twitter</div>
                    <div class="task-reward">+12 Points</div>
                </div>
                <button class="task-btn" onclick="completeTask('twitter', 12, 'https://twitter.com/elonmusk')">Start</button>
            </div>

            <div class="task-item">
                <div class="task-icon instagram">IG</div>
                <div class="task-info">
                    <div class="task-title">Follow on Instagram</div>
                    <div class="task-reward">+8 Points</div>
                </div>
                <button class="task-btn" onclick="completeTask('instagram', 8, 'https://www.instagram.com/cristiano/')">Start</button>
            </div>

            <div class="task-item">
                <div class="task-icon facebook">FB</div>
                <div class="task-info">
                    <div class="task-title">Like Facebook Page</div>
                    <div class="task-reward">+10 Points</div>
                </div>
                <button class="task-btn" onclick="completeTask('facebook', 10, 'https://www.facebook.com/zuck')">Start</button>
            </div>
        </div>

        <!-- Invite Screen -->
        <div class="screen" id="inviteScreen">
            <div class="invite-header">
                <h2>Invite Friends!</h2>
                <p>Invite friends and receive 50 MHK bonus for every account you invited</p>
            </div>
            
            <div class="invite-content">
                <div class="invite-link">
                    <strong>Your Invite Link:</strong><br>
                    https://t.me/MiniGameBot?start=<span id="userInviteCode">ABC123</span>
                </div>
                
                <button class="btn btn-primary" onclick="shareInviteLink()" style="width: 100%; margin: 10px 0;">
                    Share Invite Link
                </button>
                
                <div class="invite-stats">
                    <h3>Your Invites (5)</h3>
                    <div class="invited-user">
                        <div class="user-avatar">M</div>
                        <div>
                            <div>maximus2528</div>
                            <div style="color: #27ae60; font-size: 12px;">You received 💎 +2.00</div>
                        </div>
                    </div>
                    <div class="invited-user">
                        <div class="user-avatar">M</div>
                        <div>
                            <div>MUNNA25802502</div>
                            <div style="color: #27ae60; font-size: 12px;">You received 💎 +2.00</div>
                        </div>
                    </div>
                    <div class="invited-user">
                        <div class="user-avatar">M</div>
                        <div>
                            <div>Md Raj</div>
                            <div style="color: #27ae60; font-size: 12px;">You received 💎 +2.00</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Airdrop Screen -->
        <div class="screen" id="airdropScreen">
            <div class="airdrop-header">
                <h2>Airdrop</h2>
            </div>
            
            <div class="airdrop-content">
                <!-- Telegram Connect Section -->
                <div class="telegram-connect" id="telegramConnect">
                    <h3>📱 Connect Your Telegram</h3>
                    <p>Connect your Telegram account to access airdrop features</p>
                    <button class="telegram-btn" onclick="connectTelegram()">
                        Connect Telegram Account
                    </button>
                </div>

                <!-- User Info Section (Hidden initially) -->
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="user-name" id="userName">Welcome!</div>
                    <div class="user-id" id="userId">@username</div>
                    <p style="margin-top: 10px; color: #27ae60;">✅ Telegram Connected Successfully</p>
                </div>

                <div class="airdrop-info">
                    <h3>Listing Date</h3>
                    <p>Coming Soon</p>
                </div>
                
                <div class="update-section">
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-primary" onclick="showUpdates()" style="flex: 1;">
                            New Update
                        </button>
                        <button class="btn btn-secondary" onclick="showWithdraw()" style="flex: 1;">
                            Withdraw
                        </button>
                    </div>
                </div>

                <div id="updatesSection" style="display: none;">
                    <h3>Latest Updates</h3>
                    <div class="update-item">
                        <strong>Version 2.1.0</strong><br>
                        • Added new game features<br>
                        • Improved user interface<br>
                        • Bug fixes and performance improvements
                    </div>
                    <div class="update-item">
                        <strong>Version 2.0.0</strong><br>
                        • Major UI overhaul<br>
                        • New reward system<br>
                        • Enhanced social features
                    </div>
                </div>

                <div class="withdraw-form" id="withdrawForm" style="display: none;">
                    <h3>Withdraw Funds</h3>
                    <div class="form-group">
                        <label>Select Platform:</label>
                        <select id="withdrawPlatform">
                            <option value="binance">BINANCE</option>
                            <option value="uid">UID</option>
                            <option value="metamask">METAMASK</option>
                            <option value="coinbase">COINBASE</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Account Number/Address:</label>
                        <input type="text" id="withdrawAddress" placeholder="Enter your account details">
                    </div>
                    <div class="form-group">
                        <label>Amount:</label>
                        <input type="number" id="withdrawAmount" placeholder="Enter amount">
                    </div>
                    <div class="form-buttons">
                        <button class="btn btn-secondary" onclick="cancelWithdraw()">Cancel</button>
                        <button class="btn btn-primary" onclick="confirmWithdraw()">Confirm</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-bar">
            <button class="nav-btn active" onclick="showScreen('home')">🏠 Home</button>
            <button class="nav-btn" onclick="showScreen('tasks')">✅ Tasks</button>
            <button class="nav-btn" onclick="showScreen('invite')">👥 Invite</button>
            <button class="nav-btn" onclick="showScreen('airdrop')">🎁 Airdrop</button>
        </div>
    </div>

    <script>
        // Persistent Storage System using Cookie-like approach
        const STORAGE_KEY = 'minigame_pro_data';
        const DEVICE_ID_KEY = 'minigame_device_id';

        // Generate unique device ID if not exists
        function getDeviceId() {
            let deviceId = getCookie(DEVICE_ID_KEY);
            if (!deviceId) {
                deviceId = 'device_' + Math.random().toString(36).substring(2) + Date.now().toString(36);
                setCookie(DEVICE_ID_KEY, deviceId, 365);
            }
            return deviceId;
        }

        // Cookie functions for persistent storage
        function setCookie(name, value, days) {
            const expires = new Date();
            expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = name + '=' + encodeURIComponent(JSON.stringify(value)) + ';expires=' + expires.toUTCString() + ';path=/';
        }

        function getCookie(name) {
            const nameEQ = name + '=';
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) {
                    try {
                        return JSON.parse(decodeURIComponent(c.substring(nameEQ.length, c.length)));
                    } catch (e) {
                        return null;
                    }
                }
            }
            return null;
        }

        // Game State with Persistent Storage
        let board = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = 'X';
        let gameActive = true;
        let playerXPoints = 0;
        let playerOPoints = 0;
        let totalPoints = 0;
        let completedTasks = new Set();
        let telegramConnected = false;
        let telegramUserData = null;

        // Load saved data
        function loadGameData() {
            const savedData = getCookie(STORAGE_KEY);
            if (savedData) {
                playerXPoints = savedData.playerXPoints || 0;
                playerOPoints = savedData.playerOPoints || 0;
                totalPoints = savedData.totalPoints || 0;
                completedTasks = new Set(savedData.completedTasks || []);
                telegramConnected = savedData.telegramConnected || false;
                telegramUserData = savedData.telegramUserData || null;
            }
        }

        // Save game data
        function saveGameData() {
            const dataToSave = {
                playerXPoints,
                playerOPoints,
                totalPoints,
                completedTasks: Array.from(completedTasks),
                telegramConnected,
                telegramUserData,
                deviceId: getDeviceId(),
                lastSaved: Date.now()
            };
            setCookie(STORAGE_KEY, dataToSave, 365);
        }

        // Update display
        function updatePointsDisplay() {
            document.getElementById('playerXPoints').textContent = playerXPoints;
            document.getElementById('playerOPoints').textContent = playerOPoints;
            document.getElementById('totalPoints').textContent = totalPoints;
            saveGameData();
        }

        // Tic Tac Toe Game Logic
        function makeMove(index) {
            if (board[index] !== '' || !gameActive) return;

            board[index] = currentPlayer;
            const cell = document.getElementsByClassName('cell')[index];
            cell.textContent = currentPlayer;
            cell.classList.add(currentPlayer.toLowerCase());

            if (checkWinner()) {
                document.getElementById('gameStatus').textContent =🎉 Player ${currentPlayer} Wins! +1 Point Added!`;
                if (currentPlayer === 'X') {
                    playerXPoints += 1;
                } else {
                    playerOPoints += 1;
                }
                totalPoints = playerXPoints + playerOPoints;
                updatePointsDisplay();
                gameActive = false;
                
                setTimeout(() => {
                    resetGame();
                }, 3000);
                return;
            }

            if (board.every(cell => cell !== '')) {
                document.getElementById('gameStatus').textContent = 'It\'s a Draw!';
                gameActive = false;
                return;
            }

            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            document.getElementById('gameStatus').textContent = Player ${currentPlayer}'s Turn;
        }

        function checkWinner() {
            const winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8],
                [0, 3, 6], [1, 4, 7], [2, 5, 8],
                [0, 4, 8], [2, 4, 6]
            ];

            return winPatterns.some(pattern => {
                const [a, b, c] = pattern;
                return board[a] && board[a] === board[b] && board[a] === board[c];
            });
        }

        function resetGame() {
            board = ['', '', '', '', '', '', '', '', ''];
            currentPlayer = 'X';
            gameActive = true;
            document.getElementById('gameStatus').textContent = "Player X's Turn";
            
            const cells = document.getElementsByClassName('cell');
            for (let cell of cells) {
                cell.textContent = '';
                cell.classList.remove('x', 'o');
            }
        }

        // Navigation
        function showScreen(screenName) {
            const screens = document.getElementsByClassName('screen');
            for (let screen of screens) {
                screen.classList.remove('active');
            }

            const navBtns = document.getElementsByClassName('nav-btn');
            for (let btn of navBtns) {
                btn.classList.remove('active');
            }

            document.getElementById(screenName + 'Screen').classList.add('active');
            event.target.classList.add('active');

            // Update telegram display when showing airdrop screen
            if (screenName === 'airdrop') {
                updateTelegramDisplay();
            }
        }

        // Tasks
        function completeTask(platform, points, url) {
            // Check if task already completed
            if (completedTasks.has(platform)) {
                alert('This task has already been completed!');
                return;
            }

            window.open(url, '_blank');
            
            setTimeout(() => {
                const confirmComplete = confirm(Did you complete the ${platform} task? Click OK to earn ${points} points!);
                if (confirmComplete) {
                    totalPoints += points;
                    playerXPoints += Math.floor(points / 2);
                    playerOPoints += Math.ceil(points / 2);
                    updatePointsDisplay();
                    
                    const button = event.target;
                    button.textContent = 'Completed';
                    button.disabled = true;
                    button.style.background = '#27ae60';
                    button.style.color = 'white';
                    
                    completedTasks.add(platform);
                    saveGameData();
                    
                    alert🎉 Congratulations! You earned ${points} points!`);
                }
            }, 2000);
        }

        // Telegram Connection Functions
        function connectTelegram() {
            // Simulate telegram connection dialog
            const telegramUsername = prompt('Enter your Telegram username (without @):');
            if (telegramUsername && telegramUsername.trim()) {
                const firstName = prompt('Enter your first name:');
                const lastName = prompt('Enter your last name (optional):') || '';
                
                telegramUserData = {
                    username: telegramUsername.trim(),
                    firstName: firstName ? firstName.trim() : 'User',
                    lastName: lastName.trim(),
                    fullName: ${firstName ? firstName.trim() : 'User'} ${lastName.trim()}.trim(),
                    connectedAt: new Date().toLocaleString()
                };
                
                telegramConnected = true;
                saveGameData();
                updateTelegramDisplay();
                
                alert('🎉 Telegram account connected successfully!');
            }
        }

        function updateTelegramDisplay() {
            const connectSection = document.getElementById('telegramConnect');
            const userInfoSection = document.getElementById('userInfo');
            
            if (telegramConnected && telegramUserData) {
                connectSection.style.display = 'none';
                userInfoSection.style.display = 'block';
                
                document.getElementById('userName').textContent = telegramUserData.fullName;
                document.getElementById('userId').textContent = @${telegramUserData.username};
            } else {
                connectSection.style.display = 'block';
                userInfoSection.style.display = 'none';
            }
        }

        // Invite System
        function shareInviteLink() {
            const inviteCode = document.getElementById('userInviteCode').textContent;
            const inviteLink = https://t.me/MiniGameBot?start=${inviteCode};
            
            if (navigator.share) {
                navigator.share({
                    title: 'Join MiniGame Pro',
                    text: 'Join me on MiniGame Pro and earn rewards!',
                    url: inviteLink
                });
            } else {
                navigator.clipboard.writeText(inviteLink).then(() => {
                    alert('Invite link copied to clipboard!');
                });
            }
        }

        // Airdrop Functions
        function showUpdates() {
            document.getElementById('updatesSection').style.display = 'block';
            document.getElementById('withdrawForm').style.display = 'none';
        }

        function showWithdraw() {
            if (!telegramConnected) {
                alert('Please connect your Telegram account first to access withdraw feature!');
                return;
            }
            document.getElementById('withdrawForm').style.display = 'block';
            document.getElementById('updatesSection').style.display = 'none';
        }

        function cancelWithdraw() {
            document.getElementById('withdrawForm').style.display = 'none';
            document.getElementById('withdrawAddress').value = '';
            document.getElementById('withdrawAmount').value = '';
        }

        function confirmWithdraw() {
            const platform = document.getElementById('withdrawPlatform').value;
            const address = document.getElementById('withdrawAddress').value;
            const amount = document.getElementById('withdrawAmount').value;
            
            if (!address || !amount) {
                alert('Please fill in all fields');
                return;
            }
            
            if (amount > totalPoints) {
                alert('Insufficient balance');
                return;
            }
            
            const confirmMsg = Confirm withdrawal of ${amount} points to ${platform.toUpperCase()}?\nAddress: ${address}\nTelegram: @${telegramUserData.username};
            if (confirm(confirmMsg)) {
                alert('Withdrawal request submitted successfully! Processing time: 24-48 hours');
                cancelWithdraw();
            }
        }

        // Initialize completed tasks display
        function updateTasksDisplay() {
            const taskButtons = document.querySelectorAll('.task-btn');
            const platforms = ['youtube', 'telegram', 'twitter', 'instagram', 'facebook'];
            
            taskButtons.forEach((button, index) => {
                if (completedTasks.has(platforms[index])) {
                    button.textContent = 'Completed';
                    button.disabled = true;
                    button.style.background = '#27ae60';
                    button.style.color = 'white';
                }
            });
        }

        // Initialize the app
        function initializeApp() {
            // Get device ID for security
            const deviceId = getDeviceId();
            console.log('Device ID:', deviceId);
            
            // Load saved game data
            loadGameData();
            
            // Update displays
            updatePointsDisplay();
            updateTasksDisplay();
            updateTelegramDisplay();
            
            // Generate random invite code if not exists
            if (!document.getElementById('userInviteCode').textContent || document.getElementById('userInviteCode').textContent === 'ABC123') {
                document.getElementById('userInviteCode').textContent = Math.random().toString(36).substring(2, 😎.toUpperCase();
            }
            
            console.log('App initialized with persistent storage');
        }

        // Prevent data loss on page refresh
        window.addEventListener('beforeunload', function() {
            saveGameData();
        });

        // Auto-save every 30 seconds
        setInterval(() => {
            saveGameData();
        }, 30000);

        // Call initialization when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
        
        // Fallback initialization
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
</body>
</html>
